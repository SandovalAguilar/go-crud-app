{{define "edit_pending"}}
{{ template "index" . }}
<div class="container mt-4">
    <h1 class="text-center mb-4">Editar Pendiente</h1>
    <form action="/pendings/edit" method="POST" class="mx-auto" style="max-width: 500px;">
        <!-- Hidden ID to identify which entry to edit -->
        <input type="hidden" name="id" value="{{.Output.ID}}">

        <!-- Material Name (Required) -->
        <div class="mb-3">
            <label for="material_name" class="form-label">Nombre del material</label>
            <input type="text" class="form-control" id="material_name" name="material_name" value="{{.Output.MaterialName}}" required>
        </div>

        <!-- Department Name (Required) - Dropdown -->
        <div class="mb-3">
            <label for="department_name" class="form-label">Departamento</label>
            <select class="form-select" id="department_name" name="department_name" required>
                <option value="">Seleccione un departamento</option>
                {{range .Departments}}
                <option value="{{.DepartmentName}}" {{if eq $.Output.DepartmentName .DepartmentName}}selected{{end}}>{{.DepartmentName}}</option>
                {{end}}
            </select>
            <div class="form-text">Si el departamento no aparece, <a href="/departments/add" target="_blank">pulse aquí</a>.</div>
        </div>

        <!-- Quantity (Required) -->
        <div class="mb-3">
            <label for="quantity" class="form-label">Cantidad</label>
            <input type="number" class="form-control" id="quantity" name="quantity" value="{{.Output.Quantity}}" min="1" required>
        </div>

        <!-- Description (Optional) -->
        <div class="mb-3">
            <label for="description" class="form-label">Descripción</label>
            <input type="text" class="form-control" id="description" name="description" value="{{if .Output.Description}}{{.Output.Description}}{{end}}">
        </div>

        <!-- Date (Required) -->
        <div class="mb-3">
            <label for="date" class="form-label">Fecha</label>
            <input type="date" class="form-control" id="date" name="date" value="{{formatDate .Output.Date}}" required>
        </div>

        <!-- Requisition (Required) -->
        <div class="mb-3">
            <label for="requisition" class="form-label">Requisicion</label>
            <select class="form-select" id="requisition" name="requisition" required>
                <option value="Pendiente" {{if eq .Output.Requisition "Pendiente"}}selected{{end}}>Pendiente</option>
                <option value="Recibida" {{if eq .Output.Requisition "Recibida"}}selected{{end}}>Recibida</option>
            </select>
        </div>

        <!-- Employee Name (Required) - Dropdown -->
        <div class="mb-3">
            <label for="employee_name" class="form-label">Empleado</label>
            <select class="form-select" id="employee_name" name="employee_name" required>
                <option value="">Seleccione un empleado</option>
                {{range .Employees}}
                <option value="{{.EmployeeName}}" {{if eq $.Output.EmployeeName .EmployeeName}}selected{{end}}>{{.EmployeeName}}</option>
                {{end}}
            </select>
            <div class="form-text">Si el empleado no aparece, <a href="/employees/add" target="_blank">pulse aquí</a>.</div>
        </div>

        <!-- Submit and Cancel buttons -->
        <button type="submit" class="btn btn-success">Guardar Cambios</button>
        <a href="/pendings" class="btn btn-secondary">Cancelar</a>
    </form>
</div>
{{end}}
